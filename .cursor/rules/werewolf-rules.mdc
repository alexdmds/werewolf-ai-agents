---
alwaysApply: true
description: >
  RÃ¨gle complÃ¨te pour la simulation Loup-Garou : rÃ´les, ordre dâ€™action,
  et diffusion dâ€™information via les channels de WerewolfGame
  (public, wolves, master, seer:<id>, etc.).
---

# ğŸº RÃ¨gle â€“ Comportement des Loups-Garous (v2)

## 1. RÃ´les en prÃ©sence
| RÃ´le       | Pouvoir de nuit                            | Objectif | Channel(s) abonnÃ©(s) |
|------------|--------------------------------------------|----------|-----------------------|
| **Villager** | aucun                                     | Survivre & Ã©liminer tous les loups | `public`, `master` |
| **Seer**      | inspecter **un** joueur *(role reveal)* | Aider le village | `public`, `master`, `seer:<id>` |
| **Werewolf**  | voter deux fois pour tuer un joueur      | Tuer jusquâ€™Ã  â‰¥ villageois | `public`, `master`, `wolves` |

---

## 2. Initialisation mÃ©moire
- Chaque loup connaÃ®t les autres loups :  
  *ex.* Â« Tu sais que les autres loups sont : Paul, Julie Â».  
  AjoutÃ© dans le `system_prompt` **et** dans sa mÃ©moire (`MemoryManager.add`).

---

## 3. Ordre dâ€™action de la **nuit**

| Ã‰tape | Acteur | ImplÃ©mentation                             | Channels utilisÃ©s |
|-------|--------|--------------------------------------------|-------------------|
| 1ï¸âƒ£ | Voyante | `seer.spy(game)` renvoie `target_id`        | `master`, `seer:<seer_id>` |
| 2ï¸âƒ£ | Loups â€“ **tour 1** | chacun : `wolf.vote_to_kill(game)` | `master` |
| 3ï¸âƒ£ | Diffusion tour 1 | event : Â« Premier vote loups : â€¦ Â»   | `wolves`, `master` |
| 4ï¸âƒ£ | Loups â€“ **tour 2** | Ã  nouveau `wolf.vote_to_kill(game)` | `wolves`, `master` |
| 5ï¸âƒ£ | Diffusion tour 2 | event : Â« DeuxiÃ¨me vote loups : â€¦ Â»  | `wolves`, `master` |
| 6ï¸âƒ£ | RÃ©solution | majoritÃ© absolue â‡’ victime                | `wolves` (+ `public`) + `master` |

> **Rappel prompt loup (tour 2)**  
> Â« Voici le rÃ©capitulatif du 1áµ‰Ê³ tour : â€¦  
> Tu ne dois jamais voter pour un autre loup.  
> Renvoie uniquement lâ€™ID de la cible. Â»

---

## 4. Diffusion dâ€™information (record_event)

| Exemple dâ€™Ã©vÃ©nement                                    | Channels passÃ©s Ã  `record_event` |
|--------------------------------------------------------|----------------------------------|
| Voyante voit Luc â†’ `Wolf`                              | `["master", "seer:<seer_id>"]`   |
| Paul (loup) vote Luc (tour 1)                          | `["master"]`                     |
| RÃ©cap premier vote                                     | `["wolves", "master"]`           |
| Victime de la nuit (Luc)                               | `["wolves", "master", "public"]` |
| DÃ©but de journÃ©e : Â« Luc a Ã©tÃ© tuÃ© Â»                   | `["public", "master"]`           |

*`WerewolfGame.record_event` Ã©crit dans `logs/<channel>.txt`
et pousse le message dans la mÃ©moire de tout agent abonnÃ© au channel.*

---

## 5. RÃ©solution des votes loups
1. Compter les cibles du **tour 2**.  
2. **MajoritÃ© absolue** (> â£nb_loups / 2â¦) â‡’ victime tuÃ©e.  
3. Sinon â‡’ Â« Pas de victime Â».  
4. Un event Â« Votes des loups : â€¦ / RÃ©sultat : â€¦ Â» est envoyÃ© sur `wolves`, `master`.

---

## 6. RÃ©sumÃ© pour le prompt loup
> Â« Tu es loup-garou. Tes alliÃ©s : Paul, Julie.  
> Nuit : tu votes deux fois (tour 1, tour 2) pour tuer un **non-loup**.  
> AprÃ¨s le tour 1, tu connais les votes des autres loups.  
> MajoritÃ© absolue = victime, sinon personne.  
> Ne vote **jamais** un loup. Â»

---

## 7. Condition de victoire
- **Village** gagne si **plus aucun loup vivant**.  
- **Loups** gagnent si **0 villageois vivants**.

*(Les channels supplÃ©mentaires â€” `lovers`, `witch`, etc. â€” se rajouteront
simplement en abonnant les agents concernÃ©s.)*